# WaddleBot Environment Variables
# Copy this file to .env and fill in the values
#
# Legend:
#   [REQUIRED] - Must be set for the module to function
#   [OPTIONAL] - Has a default value or can be omitted
#   Modules listed in (parentheses) indicate which modules use this variable

# =============================================================================
# GLOBAL - Database Configuration
# Used by: ALL modules
# =============================================================================
POSTGRES_USER=waddlebot                    # [REQUIRED] PostgreSQL username
POSTGRES_PASSWORD=waddlebot_password       # [REQUIRED] PostgreSQL password
POSTGRES_DB=waddlebot                      # [REQUIRED] PostgreSQL database name
DATABASE_URL=postgresql://waddlebot:waddlebot_password@db:5432/waddlebot  # [REQUIRED]

# =============================================================================
# GLOBAL - Redis Configuration
# Used by: router, discord, labels_core, browser_source_core
# =============================================================================
REDIS_URL=redis://localhost:6379/0         # [OPTIONAL] Full Redis URL
REDIS_HOST=redis                           # [OPTIONAL] Redis hostname (default: redis)
REDIS_PORT=6379                            # [OPTIONAL] Redis port (default: 6379)
REDIS_DB=0                                 # [OPTIONAL] Redis database number
REDIS_PASSWORD=                            # [OPTIONAL] Redis password if auth required

# =============================================================================
# KONG API GATEWAY (config/kong/)
# Used by: ALL external API access via api.waddlebot.io
# =============================================================================
KONG_DATABASE=off                          # [REQUIRED] DB-less mode (default: off)
KONG_DECLARATIVE_CONFIG=/etc/kong/kong.yml # [REQUIRED] Path to declarative config
KONG_ADMIN_LISTEN=127.0.0.1:8001          # [OPTIONAL] Admin API listen address
KONG_PROXY_LISTEN=0.0.0.0:8000, 0.0.0.0:8443 ssl  # [OPTIONAL] Proxy listen addresses
KONG_SSL_CERT=/etc/kong/ssl/api.waddlebot.io.crt   # [OPTIONAL] SSL certificate path
KONG_SSL_CERT_KEY=/etc/kong/ssl/api.waddlebot.io.key  # [OPTIONAL] SSL key path
KONG_RATE_LIMIT_MINUTE=60                 # [OPTIONAL] Anonymous rate limit per minute
KONG_RATE_LIMIT_HOUR=1000                 # [OPTIONAL] Anonymous rate limit per hour
KONG_PROXY_ACCESS_LOG=/dev/stdout         # [OPTIONAL] Proxy access log location
KONG_ADMIN_ACCESS_LOG=/dev/stdout         # [OPTIONAL] Admin access log location
KONG_PROXY_ERROR_LOG=/dev/stderr          # [OPTIONAL] Proxy error log location
KONG_ADMIN_ERROR_LOG=/dev/stderr          # [OPTIONAL] Admin error log location

# =============================================================================
# GLOBAL - Core API URLs
# Used by: ALL trigger and action modules
# =============================================================================
CORE_API_URL=http://router:8000            # [REQUIRED] Base router API URL
ROUTER_API_URL=http://router:8000/api/v1/router  # [REQUIRED] Router events endpoint
HUB_API_URL=http://hub-module:8060         # [OPTIONAL] Hub module for activity tracking
SERVICE_API_KEY=                           # [OPTIONAL] Internal service API key for hub

# =============================================================================
# GLOBAL - Security & Logging
# Used by: ALL modules
# =============================================================================
SECRET_KEY=change-me-in-production         # [REQUIRED] Application secret key
LOG_LEVEL=INFO                             # [OPTIONAL] Logging level (DEBUG, INFO, WARN, ERROR)

# =============================================================================
# ROUTER MODULE (processing/router_module)
# =============================================================================
ROUTER_MAX_WORKERS=20                      # [OPTIONAL] ThreadPoolExecutor workers
ROUTER_MAX_CONCURRENT=100                  # [OPTIONAL] Max concurrent requests
ROUTER_ENTITY_CACHE_TTL=300                # [OPTIONAL] Entity-community cache TTL in seconds

# =============================================================================
# DISCORD MODULE (trigger/receiver/discord_module)
# Bot with slash commands, prefix commands, modals, buttons
# =============================================================================
DISCORD_BOT_TOKEN=                         # [REQUIRED] Discord bot token from Developer Portal
DISCORD_APPLICATION_ID=                    # [REQUIRED] Discord application/client ID
DISCORD_PUBLIC_KEY=                        # [OPTIONAL] For webhook verification (if using webhooks)
DISCORD_BOT_ENABLED=true                   # [OPTIONAL] Enable/disable Discord bot (default: true)

# =============================================================================
# SLACK MODULE (trigger/receiver/slack_module)
# Bot with slash commands (/waddlebot), prefix commands (!), modals, buttons
# =============================================================================
SLACK_BOT_TOKEN=xoxb-...                   # [REQUIRED] Slack Bot User OAuth Token
SLACK_SIGNING_SECRET=                      # [REQUIRED] Slack app signing secret for verification
SLACK_APP_TOKEN=xapp-...                   # [CONDITIONAL] Required for Socket Mode
USE_SOCKET_MODE=false                      # [OPTIONAL] Use Socket Mode vs HTTP (default: false)
SLACK_CLIENT_ID=                           # [OPTIONAL] For OAuth flows
SLACK_CLIENT_SECRET=                       # [OPTIONAL] For OAuth flows

# =============================================================================
# TWITCH MODULE (trigger/receiver/twitch_module)
# IRC bot with !prefix commands and EventSub webhooks
# =============================================================================
# Twitch API Credentials (for API calls)
TWITCH_CLIENT_ID=                          # [REQUIRED] Twitch application client ID
TWITCH_CLIENT_SECRET=                      # [REQUIRED] Twitch application client secret
TWITCH_ACCESS_TOKEN=                       # [OPTIONAL] App access token (auto-generated if missing)

# Twitch IRC Bot Configuration
TWITCH_BOT_TOKEN=oauth:...                 # [REQUIRED] OAuth token for IRC chat (get from twitchtokengenerator.com)
TWITCH_BOT_NICK=WaddleBot                  # [OPTIONAL] Bot username in chat (default: WaddleBot)
TWITCH_BOT_ENABLED=true                    # [OPTIONAL] Enable/disable IRC bot (default: true)

# Twitch EventSub Configuration
EVENTSUB_SECRET=                           # [REQUIRED] Secret for webhook signature verification
EVENTSUB_CALLBACK_URL=https://your-domain.com/eventsub/webhook  # [REQUIRED] Public webhook URL
EVENTSUB_ENABLED=true                      # [OPTIONAL] Enable/disable EventSub (default: true)

# Twitch Viewer Tracking
VIEWER_TRACKING_ENABLED=true               # [OPTIONAL] Track viewer activity (default: true)
VIEWER_POLL_INTERVAL=60                    # [OPTIONAL] Viewer poll interval in seconds
CHANNEL_REFRESH_INTERVAL=300               # [OPTIONAL] Channel list refresh interval

# =============================================================================
# AI INTERACTION MODULE (action/interactive/ai_interaction_module)
# Supports Ollama, OpenAI, and MCP providers
# =============================================================================
AI_PROVIDER=ollama                         # [REQUIRED] Provider: ollama, openai, or mcp
AI_MODEL=llama3.2                          # [REQUIRED] Model name to use

# Ollama Configuration
OLLAMA_HOST=http://ollama:11434            # [CONDITIONAL] Required if AI_PROVIDER=ollama
AI_HOST=http://ollama:11434                # [OPTIONAL] Alias for OLLAMA_HOST

# OpenAI Configuration
OPENAI_API_KEY=                            # [CONDITIONAL] Required if AI_PROVIDER=openai
OPENAI_MODEL=gpt-4o-mini                   # [OPTIONAL] OpenAI model (default: gpt-4o-mini)
OPENAI_BASE_URL=https://api.openai.com/v1  # [OPTIONAL] OpenAI API base URL

# MCP Configuration
MCP_SERVER_URL=http://mcp-server:8080      # [CONDITIONAL] Required if AI_PROVIDER=mcp
MCP_TIMEOUT=30                             # [OPTIONAL] MCP request timeout

# AI Behavior Settings
AI_TEMPERATURE=0.7                         # [OPTIONAL] Response creativity (0.0-1.0)
AI_MAX_TOKENS=500                          # [OPTIONAL] Max response tokens
SYSTEM_PROMPT=You are a helpful chatbot assistant.  # [OPTIONAL] Default system prompt
QUESTION_TRIGGERS=?                        # [OPTIONAL] Characters that trigger AI responses
RESPONSE_PREFIX=                           # [OPTIONAL] Prefix for AI responses
MAX_CONCURRENT_REQUESTS=10                 # [OPTIONAL] Max concurrent AI requests
REQUEST_TIMEOUT=30                         # [OPTIONAL] AI request timeout in seconds
ENABLE_CHAT_CONTEXT=true                   # [OPTIONAL] Include chat history context
CONTEXT_HISTORY_LIMIT=5                    # [OPTIONAL] Number of messages for context
RESPOND_TO_EVENTS=true                     # [OPTIONAL] AI responds to platform events
EVENT_RESPONSE_TYPES=subscription,follow,donation,cheer,raid,boost  # [OPTIONAL] Event types

# =============================================================================
# SHOUTOUT INTERACTION MODULE (action/interactive/shoutout_interaction_module)
# =============================================================================
# Uses TWITCH_CLIENT_ID, TWITCH_CLIENT_SECRET, TWITCH_ACCESS_TOKEN from above

# =============================================================================
# SPOTIFY INTERACTION MODULE (action/interactive/spotify_interaction_module)
# =============================================================================
SPOTIFY_CLIENT_ID=                         # [REQUIRED] Spotify application client ID
SPOTIFY_CLIENT_SECRET=                     # [REQUIRED] Spotify application client secret
SPOTIFY_REDIRECT_URI=http://localhost:8006/callback  # [REQUIRED] OAuth redirect URI

# =============================================================================
# YOUTUBE MUSIC INTERACTION MODULE (action/interactive/youtube_music_interaction_module)
# =============================================================================
YOUTUBE_API_KEY=                           # [REQUIRED] YouTube Data API key
YOUTUBE_OAUTH_CLIENT_ID=                   # [OPTIONAL] For user-authenticated requests
YOUTUBE_OAUTH_CLIENT_SECRET=               # [OPTIONAL] For user-authenticated requests

# =============================================================================
# LOYALTY INTERACTION MODULE (action/interactive/loyalty_interaction_module)
# Currency, giveaways, minigames, duels, and gear progression system
# =============================================================================
LOYALTY_API_URL=http://loyalty-interaction:8032  # [OPTIONAL] Loyalty module URL

# Loyalty Defaults
LOYALTY_CURRENCY_NAME=Points               # [OPTIONAL] Default currency name
LOYALTY_CURRENCY_SYMBOL=P                  # [OPTIONAL] Default currency symbol
LOYALTY_CURRENCY_EMOJI=ðŸª™                  # [OPTIONAL] Default currency emoji

# Gambling Settings
LOYALTY_MIN_BET=10                         # [OPTIONAL] Minimum gambling bet
LOYALTY_MAX_BET=10000                      # [OPTIONAL] Maximum gambling bet
LOYALTY_HOUSE_EDGE=0.05                    # [OPTIONAL] House edge (0.05 = 5%)

# Duel Settings
LOYALTY_DUEL_MIN_WAGER=10                  # [OPTIONAL] Minimum duel wager
LOYALTY_DUEL_MAX_WAGER=5000                # [OPTIONAL] Maximum duel wager
LOYALTY_DUEL_TIMEOUT=5                     # [OPTIONAL] Duel timeout in minutes

# =============================================================================
# BROWSER SOURCE CORE MODULE (core/browser_source_core_module)
# =============================================================================
WEBSOCKET_PORT=8052                        # [OPTIONAL] WebSocket server port
OVERLAY_BASE_URL=https://overlay.waddlebot.io  # [OPTIONAL] Base URL for overlay subdomain
OVERLAY_KEY_GRACE_PERIOD_MINUTES=5         # [OPTIONAL] Grace period for overlay key expiration

# =============================================================================
# IDENTITY CORE MODULE (core/identity_core_module)
# =============================================================================
IDENTITY_JWT_SECRET=change-me-in-production  # [REQUIRED] JWT signing secret
IDENTITY_TOKEN_EXPIRY=3600                 # [OPTIONAL] Token expiry in seconds

# =============================================================================
# HUB MODULE (admin/hub_module)
# =============================================================================
JWT_SECRET=change-me-in-production         # [REQUIRED] JWT signing secret for hub auth
JWT_EXPIRY=3600                            # [OPTIONAL] JWT expiry in seconds
ADMIN_EMAIL=admin@localhost                # [OPTIONAL] Default admin email
ADMIN_PASSWORD=admin                       # [OPTIONAL] Default admin password (change in prod!)

# Email/SMTP Configuration (for email verification)
SMTP_HOST=                                 # [OPTIONAL] SMTP server hostname
SMTP_PORT=587                              # [OPTIONAL] SMTP port
SMTP_USERNAME=                             # [OPTIONAL] SMTP username
SMTP_PASSWORD=                             # [OPTIONAL] SMTP password
SMTP_TLS=true                              # [OPTIONAL] Use TLS
FROM_EMAIL=noreply@waddlebot.com           # [OPTIONAL] From email address

# Signup Controls
DISABLE_SIGNUPS=false                      # [OPTIONAL] Disable new user signups
REQUIRE_EMAIL_VERIFICATION=false           # [OPTIONAL] Require email verification

# =============================================================================
# LABELS CORE MODULE (core/labels_core_module)
# =============================================================================
MAX_WORKERS=20                             # [OPTIONAL] ThreadPoolExecutor workers
CACHE_TTL=300                              # [OPTIONAL] Label cache TTL in seconds
BULK_OPERATION_SIZE=1000                   # [OPTIONAL] Max bulk operation size

# =============================================================================
# REPUTATION MODULE (core/reputation_module)
# FICO-style reputation scoring system (300-850 range, default 600)
# =============================================================================
REPUTATION_API_URL=http://reputation:8021  # [OPTIONAL] Reputation module URL
REPUTATION_ENABLED=true                    # [OPTIONAL] Enable/disable reputation tracking
WEIGHT_CACHE_TTL=300                       # [OPTIONAL] Weight config cache TTL in seconds

# Reputation score defaults
REPUTATION_MIN=300                         # [OPTIONAL] Minimum score (default: 300)
REPUTATION_MAX=850                         # [OPTIONAL] Maximum score (default: 850)
REPUTATION_DEFAULT=600                     # [OPTIONAL] Starting score (default: 600)
REPUTATION_AUTO_BAN_THRESHOLD=450          # [OPTIONAL] Auto-ban threshold (default: 450)

# =============================================================================
# COORDINATION SYSTEM (for horizontal scaling)
# Used by: trigger modules when running multiple instances
# =============================================================================
MAX_CLAIMS=5                               # [OPTIONAL] Max channels per container
HEARTBEAT_INTERVAL=300                     # [OPTIONAL] Heartbeat interval in seconds
CONTAINER_ID=                              # [OPTIONAL] Unique container identifier

# =============================================================================
# MODULE PORTS (for local development)
# =============================================================================
# Router
ROUTER_PORT=8000

# Trigger/Receiver Modules
DISCORD_MODULE_PORT=8001
TWITCH_MODULE_PORT=8002
SLACK_MODULE_PORT=8003

# Action/Interactive Modules
AI_MODULE_PORT=8005
SPOTIFY_MODULE_PORT=8006
YOUTUBE_MUSIC_MODULE_PORT=8007
SHOUTOUT_MODULE_PORT=8008
ALIAS_MODULE_PORT=8009
INVENTORY_MODULE_PORT=8010
MEMORIES_MODULE_PORT=8011
CALENDAR_MODULE_PORT=8012
LOYALTY_MODULE_PORT=8032

# Core Modules
IDENTITY_MODULE_PORT=8050
LABELS_MODULE_PORT=8051
BROWSER_SOURCE_MODULE_PORT=8052
REPUTATION_MODULE_PORT=8053
COMMUNITY_MODULE_PORT=8054

# Admin Modules
HUB_MODULE_PORT=8060
