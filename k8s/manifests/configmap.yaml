apiVersion: v1
kind: ConfigMap
metadata:
  name: waddlebot-config
  namespace: waddlebot
  labels:
    app.kubernetes.io/name: waddlebot
    app.kubernetes.io/instance: waddlebot
    app.kubernetes.io/component: configuration
data:
  # Database Configuration
  DATABASE_URL: "postgres://waddlebot:${POSTGRES_PASSWORD}@postgres-service:5432/waddlebot"
  DATABASE_HOST: "postgres-service"
  DATABASE_PORT: "5432"
  DATABASE_NAME: "waddlebot"
  DATABASE_USER: "waddlebot"
  DB_POOL_SIZE: "20"
  DB_MAX_OVERFLOW: "10"

  # Redis Configuration
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_DB: "0"

  # MinIO Configuration
  MINIO_ENDPOINT: "minio-service:9000"
  MINIO_BUCKET: "waddlebot"
  MINIO_ACCESS_KEY: "minioadmin"

  # Qdrant Configuration
  QDRANT_HOST: "qdrant-service"
  QDRANT_PORT: "6333"
  QDRANT_COLLECTION: "waddlebot_vectors"

  # Ollama Configuration
  OLLAMA_HOST: "http://ollama-service:11434"
  OLLAMA_MODEL: "llama2"

  # Service URLs - Processing
  ROUTER_URL: "http://router-service:8000"
  ROUTER_HOST: "router-service"
  ROUTER_PORT: "8000"

  # Service URLs - Core
  IDENTITY_URL: "http://identity-core:8050"
  LABELS_URL: "http://labels-core:8051"
  BROWSER_SOURCE_URL: "http://browser-source:8052"
  REPUTATION_URL: "http://reputation:8053"
  COMMUNITY_URL: "http://community:8054"

  # Service URLs - Action Interactive
  AI_INTERACTION_URL: "http://ai-interaction:8005"
  ALIAS_INTERACTION_URL: "http://alias-interaction:8006"
  SHOUTOUT_INTERACTION_URL: "http://shoutout-interaction:8007"
  INVENTORY_INTERACTION_URL: "http://inventory-interaction:8008"
  CALENDAR_INTERACTION_URL: "http://calendar-interaction:8009"
  MEMORIES_INTERACTION_URL: "http://memories-interaction:8010"
  YOUTUBE_MUSIC_INTERACTION_URL: "http://youtube-music-interaction:8011"
  SPOTIFY_INTERACTION_URL: "http://spotify-interaction:8012"

  # Service URLs - Trigger Receivers
  TWITCH_RECEIVER_URL: "http://twitch-receiver:8020"
  DISCORD_RECEIVER_URL: "http://discord-receiver:8021"
  SLACK_RECEIVER_URL: "http://slack-receiver:8022"

  # Service URLs - Admin
  HUB_URL: "http://hub-service:8080"
  HUB_HOST: "hub-service"
  HUB_PORT: "8080"

  # Application Configuration
  RELEASE_MODE: "false"
  LOG_LEVEL: "INFO"
  ENVIRONMENT: "development"
  DEBUG: "false"

  # Flask Configuration
  FLASK_ENV: "production"
  FLASK_DEBUG: "0"

  # Session Configuration
  SESSION_TYPE: "redis"
  PERMANENT_SESSION_LIFETIME: "86400"

  # Security Configuration
  CORS_ORIGINS: "*"
  ALLOWED_HOSTS: "*"

  # Rate Limiting
  RATELIMIT_ENABLED: "true"
  RATELIMIT_STORAGE_URL: "redis://redis-service:6379/1"

  # Worker Configuration
  THREAD_POOL_SIZE: "10"
  MAX_WORKERS: "20"

  # Logging Configuration
  LOG_DIR: "/var/log/waddlebotlog"
  LOG_MAX_BYTES: "10485760"
  LOG_BACKUP_COUNT: "5"

  # Platform Configuration
  TWITCH_CALLBACK_URL: "http://localhost:30080/api/twitch/callback"
  DISCORD_CALLBACK_URL: "http://localhost:30080/api/discord/callback"
  SLACK_CALLBACK_URL: "http://localhost:30080/api/slack/callback"
  SPOTIFY_CALLBACK_URL: "http://localhost:30080/api/spotify/callback"

  # License Server (disabled in development)
  LICENSE_SERVER_URL: "https://license.penguintech.io"
  LICENSE_CHECK_ENABLED: "false"
