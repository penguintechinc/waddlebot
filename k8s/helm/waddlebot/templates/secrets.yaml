apiVersion: v1
kind: Secret
metadata:
  name: waddlebot-secrets
  namespace: {{ .Values.namespace }}
  labels:
    app.kubernetes.io/name: waddlebot
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: secrets
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
stringData:
  # Database Credentials
  POSTGRES_PASSWORD: {{ .Values.infrastructure.postgresql.password | default "changeme" | quote }}
  DB_PASS: {{ .Values.infrastructure.postgresql.password | default "changeme" | quote }}
  DATABASE_PASSWORD: {{ .Values.infrastructure.postgresql.password | default "changeme" | quote }}
  DATABASE_URL: "postgresql://{{ .Values.infrastructure.postgresql.username }}:{{ .Values.infrastructure.postgresql.password | default "changeme" }}@{{ .Values.infrastructure.postgresql.service.name }}:{{ .Values.infrastructure.postgresql.service.port }}/{{ .Values.infrastructure.postgresql.database }}"

  # Redis Credentials (admin password)
  REDIS_PASSWORD: {{ .Values.infrastructure.redis.password | default "changeme" | quote }}
  REDIS_ADMIN_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.admin | default "changeme" | quote }}
  # Module-specific Redis passwords (matches docker-compose.yml ACL setup)
  REDIS_ROUTER_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.router | default "changeme" | quote }}
  REDIS_HUB_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.hub | default "changeme" | quote }}
  REDIS_WORKFLOW_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.workflow | default "changeme" | quote }}
  REDIS_AI_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.ai | default "changeme" | quote }}
  REDIS_ANALYTICS_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.analytics | default "changeme" | quote }}
  REDIS_SECURITY_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.security | default "changeme" | quote }}
  REDIS_LOYALTY_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.loyalty | default "changeme" | quote }}
  REDIS_SPOTIFY_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.spotify | default "changeme" | quote }}
  REDIS_YTMUSIC_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.ytmusic | default "changeme" | quote }}
  REDIS_TWITCH_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.twitch | default "changeme" | quote }}
  REDIS_DISCORD_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.discord | default "changeme" | quote }}
  REDIS_SLACK_PASSWORD: {{ .Values.infrastructure.redis.modulePasswords.slack | default "changeme" | quote }}

  # MinIO Credentials (defaults match docker-compose.yml)
  MINIO_ROOT_USER: {{ .Values.infrastructure.minio.rootUser | default "minioadmin" | quote }}
  MINIO_ROOT_PASSWORD: {{ .Values.infrastructure.minio.rootPassword | default "minioadmin" | quote }}
  S3_ACCESS_KEY_ID: {{ .Values.infrastructure.minio.rootUser | default "minioadmin" | quote }}
  S3_SECRET_ACCESS_KEY: {{ .Values.infrastructure.minio.rootPassword | default "minioadmin" | quote }}

  # JWT Secret (default matches docker-compose.yml)
  JWT_SECRET: {{ .Values.global.jwtSecret | default "changeme_jwt_secret" | quote }}

  # Module Secret Key
  MODULE_SECRET_KEY: {{ .Values.global.moduleSecretKey | quote }}

  # Service API Key
  SERVICE_API_KEY: {{ .Values.global.serviceApiKey | quote }}

  # OAuth - Discord
  DISCORD_CLIENT_ID: {{ .Values.oauth.discord.clientId | default "" | quote }}
  DISCORD_CLIENT_SECRET: {{ .Values.oauth.discord.clientSecret | default "" | quote }}
  DISCORD_BOT_TOKEN: {{ .Values.oauth.discord.botToken | default "" | quote }}
  DISCORD_APPLICATION_ID: {{ .Values.oauth.discord.applicationId | default "" | quote }}

  # OAuth - Twitch
  TWITCH_CLIENT_ID: {{ .Values.oauth.twitch.clientId | default "" | quote }}
  TWITCH_CLIENT_SECRET: {{ .Values.oauth.twitch.clientSecret | default "" | quote }}
  TWITCH_WEBHOOK_SECRET: {{ .Values.oauth.twitch.webhookSecret | default "" | quote }}

  # OAuth - Slack
  SLACK_CLIENT_ID: {{ .Values.oauth.slack.clientId | default "" | quote }}
  SLACK_CLIENT_SECRET: {{ .Values.oauth.slack.clientSecret | default "" | quote }}
  SLACK_BOT_TOKEN: {{ .Values.oauth.slack.botToken | default "" | quote }}
  SLACK_SIGNING_SECRET: {{ .Values.oauth.slack.signingSecret | default "" | quote }}

  # OAuth - YouTube
  YOUTUBE_API_KEY: {{ .Values.oauth.youtube.apiKey | default "" | quote }}
  YOUTUBE_CLIENT_ID: {{ .Values.oauth.youtube.clientId | default "" | quote }}
  YOUTUBE_CLIENT_SECRET: {{ .Values.oauth.youtube.clientSecret | default "" | quote }}
  YOUTUBE_WEBHOOK_CALLBACK_URL: {{ .Values.oauth.youtube.webhookCallbackUrl | default "" | quote }}

  # OAuth - Spotify
  SPOTIFY_CLIENT_ID: {{ .Values.oauth.spotify.clientId | default "" | quote }}
  SPOTIFY_CLIENT_SECRET: {{ .Values.oauth.spotify.clientSecret | default "" | quote }}

  # OAuth - Kick
  KICK_CLIENT_ID: {{ .Values.oauth.kick.clientId | default "" | quote }}
  KICK_CLIENT_SECRET: {{ .Values.oauth.kick.clientSecret | default "" | quote }}
  KICK_WEBHOOK_SECRET: {{ .Values.oauth.kick.webhookSecret | default "" | quote }}

  # AWS Credentials (for Lambda)
  AWS_ACCESS_KEY_ID: {{ .Values.aws.accessKeyId | default "" | quote }}
  AWS_SECRET_ACCESS_KEY: {{ .Values.aws.secretAccessKey | default "" | quote }}
  AWS_REGION: {{ .Values.aws.region | default "us-east-1" | quote }}
  AWS_LAMBDA_ROLE_ARN: {{ .Values.aws.lambdaRoleArn | default "" | quote }}

  # GCP Credentials (for Cloud Functions)
  GCP_PROJECT_ID: {{ .Values.gcp.projectId | default "" | quote }}
  GCP_REGION: {{ .Values.gcp.region | default "us-central1" | quote }}
  GCP_SERVICE_ACCOUNT_KEY: {{ .Values.gcp.serviceAccountKey | default "" | quote }}
  GCP_SERVICE_ACCOUNT_EMAIL: {{ .Values.gcp.serviceAccountEmail | default "" | quote }}

  # OpenWhisk Configuration
  OPENWHISK_API_HOST: {{ .Values.openwhisk.apiHost | default "http://openwhisk-service:3233" | quote }}
  OPENWHISK_AUTH_KEY: {{ .Values.openwhisk.authKey | quote }}
  OPENWHISK_NAMESPACE: {{ .Values.openwhisk.namespace | default "guest" | quote }}
  OPENWHISK_INSECURE: {{ .Values.openwhisk.insecure | default "true" | quote }}

  # WaddleAI Integration
  WADDLEAI_BASE_URL: {{ .Values.waddleai.baseUrl | default "" | quote }}
  WADDLEAI_API_KEY: {{ .Values.waddleai.apiKey | default "" | quote }}
